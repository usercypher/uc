<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width  initial-scale=1.0" />
  <title>TagX â€“ Example Usage</title>
  <script src="uc.js" defer></script>
  <style>

.button.neutral {
  background-color: #007bff;
  color: white;
}

.block {
  padding: 1em;
  border: 1px solid #ccc;
  margin-top: 1em;
}

.show {
  display: block;
}

.hide {
  display: none;
}

  </style>
</head>
<body style="padding: 1em;">

<h1>Control Structure Attribute</h1>

<h2>Triggers</h2>
<pre>

x-on-click               // all
x-on-click="name name2"  // only name, name2
x-on-click="!name name2" // all except name, name2

x-on-input               // all
x-on-input="name name2"  // only name, name2
x-on-input="!name name2" // all except name, name2

// hovers
x-on-enter               // all
x-on-enter="name name2"  // only name, name2
x-on-enter="!name name2" // all except name, name2

x-on-leave               // all
x-on-leave="name name2"  // only name, name2
x-on-leave="!name name2" // all except name, name2

// focus
x-on-focus               // all
x-on-focus="name name2"  // only name, name2
x-on-focus="!name name2" // all except name, name2

// hovers
x-on-blur                // all
x-on-blur="name name2"   // only name, name2
x-on-blur="!name name2"  // all except name, name2

// scope in element
12="key1 key2 ctrl-key"  // support combo key for "ctrl", "alt", "shift" combine using "-"
x-on-key-[key]=""              // (rules applied to key) all
x-on-key-[key]="name name2"    // (rules applied to key) only name, name2
x-on-key-[key]="!name name2"   // (rules applied to key) all except name, name2

// scope in window
x-on-key-window="key1 key2 ctrl-key"  // support combo key for "ctrl", "alt", "shift" combine using "-"
x-on-key-window-[key]=""              // (rules applied to key) all
x-on-key-window-[key]="name name2"    // (rules applied to key) only name, name2
x-on-key-window-[key]="!name name2"   // (rules applied to key) all except name, name2

</pre>

<h2>Modifiers</h2>
<pre>
x-no-prop   // prevent propagation x-on-click & x-on-key only.
</pre>

<h2>Actions</h2>
<pre>
x-val-[name]="value"
x-var-[name]="value"
x-rot-[name]="class1 class2"
x-tab="name:name"                   // tab key range
x-tab-reset                         // reset tab to default (default set by register)
x-focus="name"
x-set-[name].[attribute]="value|value"
x-run-[name]="trigger1 trigger2"    // activate triggers
</pre>

<h2>Target</h2>
<pre>
x-ref-[name]
</pre>

<hr>

<h2>Tab</h2>

<button 

class="button neutral"

x-on-click

x-rot-tab1="show hide"
x-rot-tab2="hide"
x-rot-tab3="hide"

x-rot-button1="neutral _"
x-rot-button2=""
x-rot-button3=""

x-ref-button1

>tab1</button>

<button 

class="button _"

x-on-click

x-rot-tab1="hide"
x-rot-tab2="show hide"
x-rot-tab3="hide"

x-rot-button1=""
x-rot-button2="neutral _"
x-rot-button3=""

x-ref-button2

>tab2</button>

<button 

class="button _"

x-on-click

x-rot-tab1="hide"
x-rot-tab2="hide"
x-rot-tab3="show hide"

x-rot-button1=""
x-rot-button2=""
x-rot-button3="neutral _"

x-ref-button3

>tab3</button>

<div class="block show" x-ref-tab1>tab1</div>
<div class="block hide" x-ref-tab2>tab2</div>
<div class="block hide" x-ref-tab3>tab3</div>

<hr>

<span

x-on-key-window="escape"

x-val-dialog-content=""
></span>

<h2>Reusable Dialog Box</h2>

<button
x-on-click
x-on-key-window="ctrl-1"

x-val-dialog-content="dialog1"
>dialog1</button>

<button
x-on-click
x-on-key-window="ctrl-2"

x-val-dialog-content="dialog2"
>dialog2</button>

<button
x-on-click
x-on-key-window="ctrl-3"

x-val-dialog-content="dialog3"
>dialog3</button>

<div class="block">

<p x-ref-dialog-content></p>

</div>

<hr>
<h2>Input binding</h2>
<input x-on-input x-val-name value="Alice"/>
<p></p>
<p x-ref-name>Alice</p>
<input x-ref-name/>


<p></p>

<label for="volumeSlider">Volume: <span id="volumeValue" x-ref-volume-label>50</span>%</label>
<input
  x-ref-volume
  x-on-input
  x-set-volume.aria-valuenow
  x-val-volume-label
  x-var-volume
  type="range"
  id="volumeSlider"
  min="0"
  max="100"
  value="50"
  step="1"
  aria-valuemin="0"
  aria-valuemax="100"
  aria-valuenow="50"
  aria-label="Volume slider"
/>

<hr>
<h2>Attribute</h2>
<p></p>
<button

x-on-click
x-rot-box="show"
x-set-.x-rot-box="hide|show"
>toggle</button>



<div class="block hide"
x-ref-box
>content</div>

<hr>

<h2>Rules</h2>
<p>Trigger rules</p>

<p><small 
class="hide"
x-ref-tooltip
x-on-enter
x-on-leave
x-rot-tooltip="show hide"
>im a tooltip!</small></p>

<button
x-on-enter="tooltip"
x-on-leave="tooltip"
x-on-click="!tooltip"
x-rot-tooltip="show hide"

x-rot-list1="show hide"
x-rot-list2="show hide"
x-rot-list3="show hide"
>drawer</button>

<div class="block hide" x-ref-list1>list1</div>
<div class="block hide" x-ref-list2>list2</div>
<div class="block hide" x-ref-list3>list3</div>

<hr>

<h2>Var</h2>


<input type="number" x-rot-tooltip="show hide" x-on-input="price" x-var-price placeholder="price"/>
<select  x-on-input x-var-qty>
    <option value="1">1x</option>
    <option value="2">2x</option>
    <option value="3">3x</option>
</select>

<p><b x-ref-qty="1" x-ref-price x-ref-total></b></p>
   
  <!-- Load Script -->
  <script>
    (window.init = window.init || []).push(function () {
        var tagx = new TagX();
        tagx.register(document.getElementsByTagName("*"), "tabfirst:tablast");
        // tagx.clean(); // clean dead references
    
        tagx.watch("*", Utils.debounce(function (key, old, current, el) {
            if (key == "qty" || key == "price") {
                tagx.getRefs("total").forEach(el => {
                    el.innerHTML = (tagx.getVar("qty")) * (tagx.getVar("price"));
                });
            }
            if (key == "volume") {
                tagx.getRefs("volume").forEach(el => {
                    console.log(el.getAttribute("aria-valuenow"));
                }); 
            }
        }, 300));
    });    
  </script>
</body>
</html>
