<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width  initial-scale=1.0" />
  <title>ElX – Example Usage</title>
  <script src="uc.js" defer></script>
  <style>

.button.neutral {
  background-color: #007bff;
  color: white;
}

.block {
  padding: 1em;
  border: 1px solid #ccc;
  margin-top: 1em;
}

.show {
  display: block;
}

.hide {
  display: none;
}

  </style>
</head>
<body style="padding: 1em;">

<h1>Control Structure Attribute</h1>

<h2>Triggers</h2>
<pre>
x-on-click               // all
x-on-click="name name2"  // only specified names
x-on-click="!name name2" // all except specified names

x-on-input               // all
x-on-input="name name2"  // only specified names
x-on-input="!name name2" // all except specified names

x-on-enter               // all (hover enter)
x-on-enter="name name2"  // only specified names
x-on-enter="!name name2" // all except specified names

x-on-leave               // all (hover leave)
x-on-leave="name name2"  // only specified names
x-on-leave="!name name2" // all except specified names

x-on-focus               // all
x-on-focus="name name2"  // only specified names
x-on-focus="!name name2" // all except specified names

x-on-blur                // all
x-on-blur="name name2"   // only specified names
x-on-blur="!name name2"  // all except specified names

// Key triggers (element scope)
x-on-key="key1 key2 ctrl-key"   // supports combos with ctrl, alt, shift using "-"
x-on-key-[key]=""               // all
x-on-key-[key]="name name2"     // only specified names
x-on-key-[key]="!name name2"    // all except specified names

// Key triggers (window scope)
x-on-key-window="key1 key2 ctrl-key"
x-on-key-window-[key]=""
x-on-key-window-[key]="name name2"
x-on-key-window-[key]="!name name2"
</pre>

<h2>Modifiers</h2>
<pre>
x-stop    // stop propagation (x-on-click, x-on-input, x-on-key only)
x-prevent // prevent default (x-on-click, x-on-input, x-on-submit only)
</pre>

<h2>Actions</h2>
<pre>
// Reserved names
this      // targets element itself (used in x-val, x-var, x-rot, x-set)

// Reserved values
this      // use element’s value or innerHTML (must be alone)
null      // in x-set removes attribute; in x-rot means no class (avoid 'null' CSS class)

x-val-[name]="value"
x-var-[name]="value"
x-rot-[name]="class1 class2"
x-tab="name:name"                       // tab key range
x-tab-reset                             // reset tab to default
x-focus="name"
x-set-[name].[attribute]="value|value"
x-run-[name]="trigger1 trigger2"        // activate triggers
</pre>

<h2>Target</h2>
<pre>
x-ref-[name]
</pre>


<hr>

<h2>Tab</h2>

<button 

class="button neutral"

x-on-click

x-rot-tab1="show hide"
x-rot-tab2="hide"
x-rot-tab3="hide"

x-rot-button1="neutral _"
x-rot-button2=""
x-rot-button3=""

x-ref-button1

>tab1</button>

<button 

class="button _"

x-on-click

x-rot-tab1="hide"
x-rot-tab2="show hide"
x-rot-tab3="hide"

x-rot-button1=""
x-rot-button2="neutral _"
x-rot-button3=""

x-ref-button2

>tab2</button>

<button 

class="button _"

x-on-click

x-rot-tab1="hide"
x-rot-tab2="hide"
x-rot-tab3="show hide"

x-rot-button1=""
x-rot-button2=""
x-rot-button3="neutral _"

x-ref-button3

>tab3</button>

<div class="block show" x-ref-tab1>tab1</div>
<div class="block hide" x-ref-tab2>tab2</div>
<div class="block hide" x-ref-tab3>tab3</div>

<hr>

<span

x-on-key-window="escape"

x-val-dialog-content=""
></span>

<h2>Reusable Dialog Box</h2>

<button
x-on-click
x-on-key-window="ctrl-1"

x-val-dialog-content="dialog1"
>dialog1</button>

<button
x-on-click
x-on-key-window="ctrl-2"

x-val-dialog-content="dialog2"
>dialog2</button>

<button
x-on-click
x-on-key-window="ctrl-3"

x-val-dialog-content="dialog3"
>dialog3</button>

<div class="block">

<p x-ref-dialog-content></p>

</div>

<hr>
<h2>Input binding</h2>
<input x-on-input x-val-name="this" value="Alice"/>
<p></p>
<p x-ref-name>Alice</p>
<input x-ref-name/>


<p></p>

<label>Volume: <span x-ref-volume-label>50</span>%</label>
<input
  x-ref-volume
  x-on-input
  x-set-volume.aria-valuenow="this"
  x-val-volume-label="this"
  x-var-volume="this"
  type="range"
  min="0"
  max="100"
  value="50"
  step="1"
  aria-valuemin="0"
  aria-valuemax="100"
  aria-valuenow="50"
/>

<hr>
<h2>Attribute</h2>
<p></p>

<button
x-on-click
x-rot-box="show"
x-set-this.x-rot-box="hide|show"
>toggle</button>


<div class="block hide"
x-ref-box
>content</div>

<hr>

<h2>Rules</h2>
<p>Trigger rules</p>

<p 
class="tooltip hide" 
x-ref-tooltip
x-on-enter
x-on-leave
x-rot-tooltip="show hide"
>
I'm a tooltip!
</p>
<button

x-on-enter="tooltip"
x-on-leave="tooltip"
x-rot-tooltip="show hide"

x-on-click="!tooltip"
x-rot-list1="show hide"
x-rot-list2="show hide"
x-rot-list3="show hide"
>
Drawer
</button>



<div class="block hide" x-ref-list1>list1</div>
<div class="block hide" x-ref-list2>list2</div>
<div class="block hide" x-ref-list3>list3</div>

<hr>

<h2>Var</h2>


<input type="number" x-on-input x-var-price="this" placeholder="price"/>
<select x-on-input x-var-qty="this">
    <option value="1">1x</option>
    <option value="2">2x</option>
    <option value="3">3x</option>
</select>

<p><b x-ref-qty="1" x-ref-price x-ref-total></b></p>

  <!-- Load Script -->
  <script>
    (window.init = window.init || []).push(function () {
        var elx = new ElX();
        elx.register(document.getElementsByTagName("*"), "tabfirst:tablast");
        // elx.clean(); // clean dead references

        elx.tap("*", Utils.debounce(function (key, old, current, el) {
            if (key == "qty" || key == "price") {
                elx.ref("total").forEach(el => {
                    el.innerHTML = (elx.vars.qty) * (elx.vars.price);
                });
            }
        }, 300));
        
        var volume = elx.x("volume"); // easier state management
    
        volume.tap(Utils.debounce(function (old, current) {
            volume.ref().forEach(el => {
                console.log(el.getAttribute("aria-valuenow"));
            }); 
        }, 300));

    });    
  </script>
</body>
</html>
